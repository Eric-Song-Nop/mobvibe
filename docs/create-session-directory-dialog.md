# 新建对话工作目录弹窗优化

## 实现前计划

### 目标

- 新建对话弹窗初始仅展示标题、后端与工作目录输入框。
- 点击工作目录的“浏览”按钮后打开独立文件浏览器弹窗。
- 目录选择后回填但不自动关闭，同时保留手动输入能力。
- 文件浏览器弹窗空间更大，便于后续复用与扩展。

### 交互方案

- 工作目录输入框保持可编辑，右侧提供“浏览”按钮打开弹窗。
- 弹窗默认定位到当前已选路径（无则回到 Home）。
- 点击目录或列标题更新路径，弹窗保持打开。
- 输入路径并回车时更新目录列，手动关闭弹窗。

### 架构调整

- 新增独立的 `WorkingDirectoryDialog` 组件，内部复用 `WorkingDirectoryPicker`。
- `WorkingDirectoryPicker` 增加选择回调与高度配置，支持弹窗模式。
- `CreateSessionDialog` 改为输入框 + 浏览按钮，并管理目录弹窗开关。

### 影响范围

- 前端 UI：`CreateSessionDialog`、`WorkingDirectoryPicker`。
- 新增组件：`WorkingDirectoryDialog`。
- 文档：新增实现记录与使用说明。

## 实现后记录

### 前端实现

- 新建对话使用可编辑输入框与“浏览”按钮打开独立目录弹窗。
- 弹窗默认定位到当前路径，未选路径时自动填充 Home。
- 新增 `WorkingDirectoryDialog` 作为独立弹窗容器，提供更大浏览空间。
- `WorkingDirectoryPicker` 支持选择回调、可配置浏览高度与输入框 ID。
- 弹窗内选择目录只刷新路径，不会自动关闭。

### 使用说明

- 在新建对话弹窗中，可直接输入路径或点击“浏览”。
- 弹窗内点击目录或列标题会刷新路径，手动关闭弹窗返回。
- 手动输入路径后回车会刷新目录，不会自动关闭。
