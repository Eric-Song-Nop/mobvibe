
## 背景

- 关闭会话时，如果会话已断开或异常，前端当前会因后端返回错误而无法从列表移除。
- 期望关闭操作具备幂等性，即便会话已不存在或连接异常也能完成清理。

## 实现前计划

- 后端关闭接口改为幂等：会话不存在也返回 `ok`，不再返回 404。
- `SessionManager` 在断开连接失败时记录错误并继续清理会话缓存。
- 前端保持现有行为，仅在后端成功响应时移除会话，避免网络异常误删。

## 架构调整

- 后端会话生命周期：关闭接口从“严格存在”调整为“幂等清理”。
- 连接断开错误只记录日志，不再阻止会话移除。
- 前端会话列表与后端状态解耦度降低风险，仍以成功响应为准。

## 实现后记录

- `POST /acp/session/close` 改为幂等响应，忽略会话不存在的情况。
- `SessionManager.closeSession` 在断开失败时记录错误并继续清理缓存。
- 新增测试覆盖断开失败仍移除会话的场景。
