* Mobvibe

Mobvibe is a distributed ACP (Agent Client Protocol) WebUI for local agent workflows. It connects to ACP-compatible CLIs (opencode, gemini-cli, claude-code), manages multi-session chat, and delivers a fast, touch-friendly experience across desktop and mobile.

** Key Features

- Multi-session chat with real-time streaming updates
- End-to-end encryption (E2EE) — session content encrypted on CLI, decrypted on WebUI; gateway cannot read content
- Permission request handling with inline decision cards
- Slash command picker (=/=) and file resource picker (=@=)
- Session-scoped file explorer with code preview and Tree-sitter outline
- Desktop and mobile apps via Tauri v2
- Light/dark/system themes, i18n (Chinese/English)

** Architecture

#+begin_src
┌─────────────────────────────────────────────────────────────────────────────────┐
│  Cloudflare (CDN + WAF + DNS)                                                   │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐              │
│  │ mobvibe.net       │  │ app.mobvibe.net   │  │ api.mobvibe.net   │              │
│  └────────┬─────────┘  └────────┬─────────┘  └────────┬─────────┘              │
└───────────┼──────────────────────┼──────────────────────┼───────────────────────┘
            │                      │                      │
┌───────────┼──────────────────────┼──────────────────────┼───────────────────────┐
│  Render (Oregon)                 │                      │                       │
│  ┌────────▼─────────┐  ┌────────▼─────────┐  ┌────────▼─────────┐             │
│  │   Website        │  │     WebUI        │  │    Gateway       │◄──Socket.io──┐│
│  │ (Static Site)    │  │  (Static Site)   │  │ (Docker/Express) │             ││
│  └──────────────────┘  └──────────────────┘  └────────┬─────────┘             ││
│                                                       │                       ││
│                                              ┌────────▼─────────┐             ││
│                                              │   PostgreSQL     │             ││
│                                              └──────────────────┘             ││
└───────────────────────────────────────────────────────────────────────────────┘│
                                                                                 │
                                                                   ┌─────────────▼─┐
                                                                   │  mobvibe-cli   │
                                                                   │   (Bun CLI)    │
                                                                   └───────┬────────┘
                                                                           │ stdin/stdout
                                                                   ┌───────▼────────┐
                                                                   │   ACP Agent    │
                                                                   │ (claude-code)  │
                                                                   └────────────────┘
#+end_src

** Prerequisites

- Node.js 18+ (for gateway/webui)
- Bun 1.0+ (for mobvibe-cli)
- pnpm (package manager)
- ACP CLI tools: =opencode= (default), =claude-code=, =codex=, =gemini-cli=, or any ACP-compatible agent

** Quick Start

#+begin_src bash
# Clone repository
git clone https://github.com/anthropics/mobvibe.git
cd mobvibe

# Install dependencies
pnpm install

# Start all services
pnpm dev
#+end_src

Services will be available at:
- Gateway: http://localhost:3005
- WebUI: http://localhost:5173

** CLI Usage

*** Installation

#+begin_src bash
# Run from repository
cd apps/mobvibe-cli
pnpm build
./bin/mobvibe.mjs start
#+end_src

*** Commands

| Command                          | Description                                  |
|----------------------------------+----------------------------------------------|
| =mobvibe login=                   | Authenticate and generate E2EE master secret |
| =mobvibe logout=                  | Remove stored credentials                    |
| =mobvibe auth-status=             | Show authentication status                   |
| =mobvibe start [--gateway <url>]= | Start daemon                                 |
| =mobvibe stop=                    | Stop daemon                                  |
| =mobvibe status=                  | Show daemon status                           |
| =mobvibe logs [-f] [-n <lines>]=  | View daemon logs                             |
| =mobvibe e2ee show=               | Display master secret for WebUI pairing      |
| =mobvibe e2ee status=             | Show E2EE key status                         |

*** Configuration

| Variable                | Description                              |
|-------------------------+------------------------------------------|
| =MOBVIBE_GATEWAY_URL=    | Gateway URL (default: http://localhost:3005) |
| =MOBVIBE_HOME=           | CLI home directory (default: ~/.mobvibe) |

*** ACP Agents

Mobvibe loads agent definitions from =${MOBVIBE_HOME:-~/.mobvibe}/.config.json=.

- =agents=: list of agents to expose. Each entry supports =id= (required), =command= (required), =label=, =args=, =env=.
- =defaultAgentId=: optional default agent id.

Behavior:
- If the config is missing or =agents= is empty, Mobvibe uses the built-in =opencode= backend.
- If you define =agents= without an =opencode= entry, the built-in =opencode= backend is prepended.
- If you define an agent with =id: "opencode"=, your list replaces the built-in default.
- =defaultAgentId= must match an existing agent id.

#+begin_src json
{
  "agents": [
    {
      "id": "opencode",
      "label": "OpenCode",
      "command": "opencode",
      "args": ["acp"]
    }
  ],
  "defaultAgentId": "opencode"
}
#+end_src

**** OpenCode (default)

- Install OpenCode and ensure =opencode= is on your PATH: [[https://github.com/sst/opencode][https://github.com/sst/opencode]]
- Mobvibe runs =opencode acp= by default. Add an explicit =opencode= entry only if you need custom args or env.

**** Claude Code (via Zed adapter)

- Install: =pnpm add -g @zed-industries/claude-code-acp=
- Ensure =ANTHROPIC_API_KEY= is available (or set it via =env=).

#+begin_src json
{
  "agents": [
    {
      "id": "claude-code",
      "label": "Claude Code",
      "command": "claude-code-acp",
      "env": {
        "ANTHROPIC_API_KEY": "<your-key>"
      }
    }
  ],
  "defaultAgentId": "claude-code"
}
#+end_src

**** Codex (via Zed adapter)

- Install from releases or =pnpm dlx @zed-industries/codex-acp= and ensure =codex-acp= is on your PATH: [[https://github.com/zed-industries/codex-acp][https://github.com/zed-industries/codex-acp]]
- Ensure =OPENAI_API_KEY= (or =CODEX_API_KEY=) is available.

#+begin_src json
{
  "agents": [
    {
      "id": "codex",
      "label": "Codex",
      "command": "codex-acp",
      "env": {
        "OPENAI_API_KEY": "<your-key>"
      }
    }
  ],
  "defaultAgentId": "codex"
}
#+end_src

** Supported ACP Agents

Documentation Index: https://agentclientprotocol.com/llms.txt

The following agents can be used with an ACP Client:

- [[https://phil65.github.io/agentpool/advanced/acp-integration/][AgentPool]]
- [[https://docs.augmentcode.com/cli/acp][Augment Code]]
- [[https://docs.blackbox.ai/features/blackbox-cli/introduction][Blackbox AI]]
- [[https://docs.anthropic.com/en/docs/claude-code/overview][Claude Code]] (via [[https://github.com/zed-industries/claude-code-acp][Zed's SDK adapter]])
- [[https://developers.openai.com/codex/cli][Codex CLI]] (via [[https://github.com/zed-industries/codex-acp][Zed's adapter]])
- [[https://github.com/stippi/code-assistant?tab=readme-ov-file#configuration][Code Assistant]]
- [[https://github.com/docker/cagent][Docker's cagent]]
- [[https://fast-agent.ai/acp][fast-agent]]
- [[https://github.com/google-gemini/gemini-cli][Gemini CLI]]
- [[https://block.github.io/goose/docs/guides/acp-clients][Goose]]
- [[https://www.jetbrains.com/junie/][JetBrains Junie (coming soon)]]
- [[https://github.com/MoonshotAI/kimi-cli][Kimi CLI]]
- [[https://github.com/femto/minion-code][Minion Code]]
- [[https://github.com/mistralai/mistral-vibe][Mistral Vibe]]
- [[https://github.com/sst/opencode][OpenCode]]
- [[https://docs.openhands.dev/openhands/usage/run-openhands/acp][OpenHands]]
- [[https://github.com/badlogic/pi-mono/tree/main/packages/coding-agent][Pi]] (via [[https://github.com/svkozak/pi-acp][pi-acp adapter]])
- [[https://docs.qoder.com/cli/acp][Qoder CLI]]
- [[https://github.com/QwenLM/qwen-code][Qwen Code]]
- [[https://github.com/stakpak/agent?tab=readme-ov-file#agent-client-protocol-acp][Stakpak]]
- [[https://github.com/vinhnx/vtcode/blob/main/README.md#zed-ide-integration-agent-client-protocol][VT Code]]

** E2EE Setup

*** 1. Login (CLI)

#+begin_src bash
mobvibe login
#+end_src

Enter email and password. This authenticates with the gateway, generates a master secret, and registers the device. The master secret is displayed at the end — copy it for step 2.

*** 2. Pair WebUI

Open WebUI → Settings → End-to-End Encryption → paste the master secret → click "Pair".

To view the secret again later: =mobvibe e2ee show=

*** 3. Start daemon

#+begin_src bash
mobvibe start
#+end_src

All session content is now encrypted end-to-end. The gateway routes events but cannot read their content.

** WebUI Usage

*** Web Mode

#+begin_src bash
cd apps/webui
pnpm dev
#+end_src

Access at http://localhost:5173

*** Desktop Mode (Tauri)

#+begin_src bash
cd apps/webui
pnpm dev:tauri    # Development
pnpm build:tauri  # Production build
#+end_src

Outputs: =.msi=, =.exe= (Windows), =.app=, =.dmg= (macOS), =.deb=, =.AppImage= (Linux)

*** Mobile Mode (Tauri)

#+begin_src bash
# Android (requires Android SDK)
cd apps/webui
pnpm android:init   # First time only
pnpm android:dev    # Development

# iOS (macOS only, requires Xcode)
pnpm ios:init       # First time only
pnpm ios:dev        # Development
#+end_src

*** Environment

| Variable           | Description                                |
|--------------------+--------------------------------------------|
| =VITE_GATEWAY_URL=  | Gateway URL (auto-detected if not set)     |

** Development

*** Scripts

| Command       | Description            |
|---------------+------------------------|
| =pnpm dev=     | Start all packages     |
| =pnpm build=   | Build all packages     |
| =pnpm lint=    | Lint with Biome        |
| =pnpm format=  | Format with Biome      |
| =pnpm test=    | Run tests with Vitest  |

*** Code Style

- Formatter: Biome (tab indentation, double quotes)
- TypeScript: Strict mode

** Deployment

Mobvibe is deployed on [[https://render.com][Render]] with [[https://cloudflare.com][Cloudflare]] for DNS and CDN.

*** Production

| Service     | Type         | Domain            |
|-------------+--------------+-------------------|
| Gateway     | Docker       | =api.mobvibe.net=  |
| WebUI       | Static Site  | =app.mobvibe.net=  |
| Website     | Static Site  | =mobvibe.net=      |
| PostgreSQL  | Database     | Internal           |

All services run in Render's Oregon region. Cloudflare provides CDN caching, DDoS protection, and TLS termination.

Configuration is defined in =render.yaml= (Render Blueprint).

*** Preview Environments

Every pull request automatically creates a full preview environment (Gateway + WebUI + Website + PostgreSQL). Preview environments expire 3 days after the PR is merged or closed.

*** Cloudflare DNS Setup

| Record            | Type  | Value                              | Proxy  |
|-------------------+-------+------------------------------------+--------|
| =api.mobvibe.net=  | CNAME | =mobvibe-gateway.onrender.com=     | Proxied |
| =app.mobvibe.net=  | CNAME | =mobvibe-webui.onrender.com=       | Proxied |
| =mobvibe.net=      | CNAME | =mobvibe-website.onrender.com=     | Proxied |

SSL/TLS mode: Full (Strict). Set DNS Only first, switch to Proxied after Render issues TLS certificates.

** Documentation

- ACP Protocol: https://agentclientprotocol.com/
- ACP TypeScript SDK: https://agentclientprotocol.github.io/typescript-sdk/
